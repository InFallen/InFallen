<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Jekyll - Развертывание</title>
    <!-- CSS only -->


    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">

    <link rel="stylesheet" href="/assets/css/styles.css">

    <link rel="shortcut icon" type="image/png" href="/assets/img/favicon.png">

    
    





    
</head>

<body>
    <div class="container">
        <header>

            <nav class="navbar navbar-expand-lg">
    <div class="container">
        <a class="navbar-brand" href="/">InFallen.space</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                

                

                <li class="nav-item">
                    <a class="nav-link" aria-current="page" href="/">Блог</a>
                </li>

                

                

                
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
                        aria-expanded="false">Операционные системы</a>

                    <ul class="dropdown-menu dropdown-menu-end dropdown-menu-lg-start">
                        

                        <li class="nav-item">
                            <a class="dropdown-item" aria-current="page" href="/os/windows.html">Windows</a>
                        </li>
                        <li>
                            <hr class="divider">
                        </li>
                        

                        <li class="nav-item">
                            <a class="dropdown-item" aria-current="page" href="/os/windows-server.html">Windows Server</a>
                        </li>
                        <li>
                            <hr class="divider">
                        </li>
                        

                        <li class="nav-item">
                            <a class="dropdown-item" aria-current="page" href="/os/macos.html">MacOS</a>
                        </li>
                        <li>
                            <hr class="divider">
                        </li>
                        

                        <li class="nav-item">
                            <a class="dropdown-item" aria-current="page" href="/os/centos-7.html">CentOS 7</a>
                        </li>
                        <li>
                            <hr class="divider">
                        </li>
                        
                    </ul>

                </li>
                

                

                
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
                        aria-expanded="false">Git и все что с ним связано</a>

                    <ul class="dropdown-menu dropdown-menu-end dropdown-menu-lg-start">
                        

                        <li class="nav-item">
                            <a class="dropdown-item" aria-current="page" href="/git/basics.html">Основы Git</a>
                        </li>
                        <li>
                            <hr class="divider">
                        </li>
                        

                        <li class="nav-item">
                            <a class="dropdown-item" aria-current="page" href="/git/github.html">GitHub</a>
                        </li>
                        <li>
                            <hr class="divider">
                        </li>
                        
                    </ul>

                </li>
                

                

                
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
                        aria-expanded="false">Языки программирования и не только</a>

                    <ul class="dropdown-menu dropdown-menu-end dropdown-menu-lg-start">
                        

                        <li class="nav-item">
                            <a class="dropdown-item" aria-current="page" href="/lang/javascript.html">JavaScript</a>
                        </li>
                        <li>
                            <hr class="divider">
                        </li>
                        

                        <li class="nav-item">
                            <a class="dropdown-item" aria-current="page" href="/lang/python.html">Python</a>
                        </li>
                        <li>
                            <hr class="divider">
                        </li>
                        

                        <li class="nav-item">
                            <a class="dropdown-item" aria-current="page" href="/lang/markdown.html">Markdown</a>
                        </li>
                        <li>
                            <hr class="divider">
                        </li>
                        
                    </ul>

                </li>
                

                

                
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
                        aria-expanded="false">CMS</a>

                    <ul class="dropdown-menu dropdown-menu-end dropdown-menu-lg-start">
                        

                        <li class="nav-item">
                            <a class="dropdown-item" aria-current="page" href="/cms/jekyll.html">Jekyll</a>
                        </li>
                        <li>
                            <hr class="divider">
                        </li>
                        

                        <li class="nav-item">
                            <a class="dropdown-item" aria-current="page" href="/cms/wordpress.html">WordPress</a>
                        </li>
                        <li>
                            <hr class="divider">
                        </li>
                        
                    </ul>

                </li>
                

                

                
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
                        aria-expanded="false">IDE, Тестовые редакторы</a>

                    <ul class="dropdown-menu dropdown-menu-end dropdown-menu-lg-start">
                        

                        <li class="nav-item">
                            <a class="dropdown-item" aria-current="page" href="/ide-text-editors/vscode.html">Visual Studio Code</a>
                        </li>
                        <li>
                            <hr class="divider">
                        </li>
                        

                        <li class="nav-item">
                            <a class="dropdown-item" aria-current="page" href="/ide-text-editors/phpstorm.html">PhpStorm</a>
                        </li>
                        <li>
                            <hr class="divider">
                        </li>
                        
                    </ul>

                </li>
                

                

                
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
                        aria-expanded="false">Software</a>

                    <ul class="dropdown-menu dropdown-menu-end dropdown-menu-lg-start">
                        

                        <li class="nav-item">
                            <a class="dropdown-item" aria-current="page" href="/software/zabbix.html">Zabbix</a>
                        </li>
                        <li>
                            <hr class="divider">
                        </li>
                        

                        <li class="nav-item">
                            <a class="dropdown-item" aria-current="page" href="/software/nginx.html">Nginx</a>
                        </li>
                        <li>
                            <hr class="divider">
                        </li>
                        

                        <li class="nav-item">
                            <a class="dropdown-item" aria-current="page" href="/software/apache.html">Apache</a>
                        </li>
                        <li>
                            <hr class="divider">
                        </li>
                        
                    </ul>

                </li>
                

                

                

                <li class="nav-item">
                    <a class="nav-link" aria-current="page" href="/about.html">Об авторе</a>
                </li>

                

                
            </ul>
        </div>
    </div>
</nav>

        </header>

        <main>
            <h1 id="развертывание">Развертывание</h1>

<p>Это финальный шаг, в котором будет происходить подготовка сайта к релизу.</p>

<h2 id="gemfile">Gemfile</h2>
<p>Хорошей практикой является наличие <strong>Gemfile</strong> для сайта. Это гарантирует, что версия Jekyll и других gems останутся согласованными в разных средах.</p>

<p>Создайте <strong>Gemfile</strong> в корневой директории сайта. Файл должен называться “Gemfile” и не должен иметь расширения. Можно создать его с помощью <strong>Bundler</strong> и затем добавть gem Jekyll:</p>

<figure class="highlight">
  <pre><code class="language-bash" data-lang="bash">bundle init
bundle add jekyll</code></pre>
</figure>

<p>Если используем Ruby версии 3.0.0 или выше, то нужно в файл Gemfile добавить зависимость webrick:</p>

<figure class="highlight">
  <pre><code class="language-bash" data-lang="bash">bundle add webrick</code></pre>
</figure>

<p>Файл должен выглядеть примерно так:</p>

<figure class="highlight">
  <pre><code class="language-bash" data-lang="bash"><span class="c"># frozen_string_literal: true</span>
<span class="nb">source</span> <span class="s2">"https://rubygems.org"</span>

gem <span class="s2">"jekyll"</span>
gem <span class="s2">"webrick"</span></code></pre>
</figure>

<p><strong>Bundler</strong> устанавливает gems и создает файл <strong>Gemfile.lock</strong>, который блокирует текущие версии gems для последующей установки с помощью команды <strong>bundle install</strong>. Если потребуется обновить версии gem, можно использовать команду <em>bundle update</em>.</p>

<p>При использовании <strong>Gemfile</strong>, запускать команду <strong>jekyll serve</strong> нужно с префиксом <strong>bundle exec</strong>. Полная команда выглядит так:</p>

<figure class="highlight">
  <pre><code class="language-bash" data-lang="bash">bundle <span class="nb">exec </span>jekyll serve</code></pre>
</figure>

<p>Это позволяет среде Ruby использовать только gems из <strong>Gemfile</strong>.</p>

<h2 id="плагины">Плагины</h2>
<p>Плагины Jekyll позволяют создавать настраиваемый контент, специфичный для сайта. Существует множество разных плагинов, а также возможность написать свой.</p>

<p>Есть три официальных плагина, которые полезны на любом сайте Jekyll:</p>

<ul>
  <li><a href="https://github.com/jekyll/jekyll-sitemap">jekyll-sitemap</a> - Создает файл карты сайта, чтобы помочь поисковым системам индексировать контент.</li>
  <li><a href="https://github.com/jekyll/jekyll-feed">jekyll-feed</a> - Создает RSS-канал для ваших сообщений.</li>
  <li><a href="https://github.com/jekyll/jekyll-seo-tag">jekyll-seo-tag</a> - Добавляет метатеги, чтобы помочь с SEO.</li>
</ul>

<p>Для использования плагинов, нужно добавить их в <strong>Gemfile</strong>. Если их добавить в групп <strong>jekyll_plugins</strong>, то они автоматически будут использовать Jekyll:</p>

<figure class="highlight">
  <pre><code class="language-yaml" data-lang="yaml"><span class="s">source 'https://rubygems.org'</span>

<span class="s">gem 'jekyll'</span>

<span class="s">group :jekyll_plugins do</span>
    <span class="s">gem 'jekyll-sitemap'</span>
    <span class="s">gem 'jekyll-feed'</span>
    <span class="s">gem 'jekyll-seo-tag'</span>
<span class="s">end</span></code></pre>
</figure>

<p>Затем добавляем эти строки в <strong>_config.yml</strong>:</p>

<figure class="highlight">
  <pre><code class="language-yaml" data-lang="yaml"><span class="na">plugins</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">jekyll-feed</span>
  <span class="pi">-</span> <span class="s">jekyll-sitemap</span>
  <span class="pi">-</span> <span class="s">jekyll-seo-tag</span></code></pre>
</figure>

<p>Для установки используем команду <strong>bundle update</strong>.</p>

<p><strong>jekyll-sitemap</strong> не требует настройки, он создаст вашу карту сайта при сборке.</p>

<p>Для <strong>jekyll-feed</strong> и <strong>jekyll-seo-tag</strong> необходимо добавить теги в <strong>_layouts/default.html</strong>:</p>

<figure class="highlight">
  <pre><code class="language-html" data-lang="html"><span class="cp">&lt;!doctype html&gt;</span>
<span class="nt">&lt;html&gt;</span>
    <span class="nt">&lt;head&gt;</span>
        <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;title&gt;</span>{{ page.title }}<span class="nt">&lt;/title&gt;</span>
        <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"/assets/css/styles.css"</span><span class="nt">&gt;</span>
        {% feed_meta %}
        {% seo %}
    <span class="nt">&lt;/head&gt;</span>
    <span class="nt">&lt;body&gt;</span>
        {% include navigation.html %}
        {{ content }}
    <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span></code></pre>
</figure>

<p>Перезапускаем сервер Jekyll и убеждаемся что эти теги появились в <strong>&lt;head&gt;</strong>.</p>

<h2 id="окружающая-среда">Окружающая среда</h2>
<p>Иногда нужно вывести что-то в продакшене, а не в разработке. Скрипты аналитики являются наиболее распространенным примером этого.</p>

<p>Для этого можно использовать окружающую среду. Для установки окружающей среды можно использовать переменную среды <strong>JEKYLL_ENV</strong> при выполнении команды, например:</p>

<figure class="highlight">
  <pre><code class="language-bash" data-lang="bash"><span class="nv">JEKYLL_ENV</span><span class="o">=</span>production bundle <span class="nb">exec </span>jekyll build</code></pre>
</figure>

<p>По умолчанию переменная <strong>JEKYLL_ENC=developmnets</strong>. Эта переменная доступна в liquid с помощью <strong>jekyll.environment</strong>.
Таким образом, чтобы вывести сценарий аналитики только на продакшене, используем:</p>

<figure class="highlight">
  <pre><code class="language-markdown" data-lang="markdown">{% if jekyll.environment == "production" %}
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"my-analytics-script.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
{% endif %}</code></pre>
</figure>

<h2 id="развертывание-1">Развертывание</h2>
<p>Последним шагом является размещение сайта на рабочем сервере. Самый простой способ сделать это - запустить продакшн сборку:</p>

<p>JEKYLL_ENV=production bundle exec jekyll build</p>

<p>И скопировать файлы из директории <strong>_site</strong> на сервер.</p>

<p>Также можно автоматизировать этот процесс с <strong>помощью CI</strong> или <strong>3rd party</strong>.</p>

<h2 id="подведение-итогов">Подведение итогов</h2>

<p>Это окончание пошагового руководства и начало вашего путешествия по Jekyll!</p>











<div class="prev-next-button">
    
    <span class="button prev">
        <a href="/jekyll/stepbystep/10-collections">
            <img src="/assets/img/arrow.png">
        </a>
    </span>
    
    
</div>






<div class="step">
    <a href="/jekyll/stepbystep/1-install">Установка</a>
</div>

<div class="step">
    <a href="/jekyll/stepbystep/2-create">Создание сайта</a>
</div>

<div class="step">
    <a href="/jekyll/stepbystep/3-liquid">Liquid</a>
</div>

<div class="step">
    <a href="/jekyll/stepbystep/4-front-matter">Front-Matter</a>
</div>

<div class="step">
    <a href="/jekyll/stepbystep/5-layouts">Макеты</a>
</div>

<div class="step">
    <a href="/jekyll/stepbystep/6-includes">Includes(Включения)</a>
</div>

<div class="step">
    <a href="/jekyll/stepbystep/7-data">Файлы данных</a>
</div>

<div class="step">
    <a href="/jekyll/stepbystep/8-assets">Ресурсы</a>
</div>

<div class="step">
    <a href="/jekyll/stepbystep/9-blog">Ведение блога</a>
</div>

<div class="step">
    <a href="/jekyll/stepbystep/10-collections">Коллекции</a>
</div>

<div class="step">
    <a href="/jekyll/stepbystep/11-deployment">Развертывание</a>
</div>

            <div class="container">
    <ul class="list-group posts">
        
        
    </ul>
</div>
        </main>

        <footer>
    <div class="container">
        <div class="tags">
            




<a href="/tag/linux" target="_blank">
    <nobr>linux</nobr>
</a>



<a href="/tag/centos-7" target="_blank">
    <nobr>centos-7</nobr>
</a>



<a href="/tag/jekyll" target="_blank">
    <nobr>jekyll</nobr>
</a>



<a href="/tag/github-pages" target="_blank">
    <nobr>github-pages</nobr>
</a>



<a href="/tag/github" target="_blank">
    <nobr>github</nobr>
</a>



<a href="/tag/blog" target="_blank">
    <nobr>blog</nobr>
</a>



<a href="/tag/windows" target="_blank">
    <nobr>windows</nobr>
</a>



<a href="/tag/vscode" target="_blank">
    <nobr>vscode</nobr>
</a>



<a href="/tag/text-editors" target="_blank">
    <nobr>text-editors</nobr>
</a>



<a href="/tag/macos" target="_blank">
    <nobr>macos</nobr>
</a>

        </div>
        <div class="links">
            <div>
                <h4>Социальные сети</h4>
                <ul class="list-group socials">
                    
                    <li class="list-group-item">
                        <a href="https://github.com/InFallen" target="_blank">
                            <img src="/assets/img/icon-github.png" alt="icon GitHub">
                        </a>
                    </li>
                    
                    <li class="list-group-item">
                        <a href="https://vk.com/infallen" target="_blank">
                            <img src="/assets/img/icon-vk.png" alt="icon VK">
                        </a>
                    </li>
                    
                </ul>
            </div>
            <div>
                <h4>Используемые ресурсы</h4>
                <ul class="list-group resources">
                    
                    <li class="list-group-item">
                        <a href="https://getbootstrap.com/" target="_blank">
                            <img src="/assets/img/icon-bootstrap.png" alt="icon Bootstrap">
                        </a> - инструменты для создания сайтов и веб-приложений.
                    </li>
                    
                    <li class="list-group-item">
                        <a href="https://icons8.ru/" target="_blank">
                            <img src="/assets/img/icon-icons8.png" alt="icon Icons8">
                        </a> - иконки на любой случай.
                    </li>
                    
                </ul>
            </div>
        </div>
        <div class="copyright">
            
            <span>Copyright &copy; infallen.space 2022.
                Все
                права защищены</span>
        </div>
    </div>
</footer>
    </div>
    <!-- JavaScript Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-u1OknCvxWvY5kfmNBILK2hRnQC3Pr17a+RTT6rIHI7NnikvbZlHgTPOOmMi466C8"
        crossorigin="anonymous"></script>
    <script scr="/assets/js/scripts.js"></script>

</body>

</html>