<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Jekyll - Коллекции</title>
    <!-- CSS only -->


    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">

    <link rel="stylesheet" href="/assets/css/styles.css">

    <link rel="shortcut icon" type="image/png" href="/assets/img/favicon.png">

    
    





    
</head>

<body>
    <div class="container">
        <header>

            <nav class="navbar navbar-expand-lg">
    <div class="container">
        <a class="navbar-brand" href="/">InFallen.space</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                

                

                <li class="nav-item">
                    <a class="nav-link" aria-current="page" href="/">Блог</a>
                </li>

                

                

                
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
                        aria-expanded="false">Операционные системы</a>

                    <ul class="dropdown-menu dropdown-menu-end dropdown-menu-lg-start">
                        

                        <li class="nav-item">
                            <a class="dropdown-item" aria-current="page" href="/os/windows.html">Windows</a>
                        </li>
                        <li>
                            <hr class="divider">
                        </li>
                        

                        <li class="nav-item">
                            <a class="dropdown-item" aria-current="page" href="/os/windows-server.html">Windows Server</a>
                        </li>
                        <li>
                            <hr class="divider">
                        </li>
                        

                        <li class="nav-item">
                            <a class="dropdown-item" aria-current="page" href="/os/macos.html">MacOS</a>
                        </li>
                        <li>
                            <hr class="divider">
                        </li>
                        

                        <li class="nav-item">
                            <a class="dropdown-item" aria-current="page" href="/os/centos-7.html">CentOS 7</a>
                        </li>
                        <li>
                            <hr class="divider">
                        </li>
                        
                    </ul>

                </li>
                

                

                
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
                        aria-expanded="false">Git и все что с ним связано</a>

                    <ul class="dropdown-menu dropdown-menu-end dropdown-menu-lg-start">
                        

                        <li class="nav-item">
                            <a class="dropdown-item" aria-current="page" href="/git/basics.html">Основы Git</a>
                        </li>
                        <li>
                            <hr class="divider">
                        </li>
                        

                        <li class="nav-item">
                            <a class="dropdown-item" aria-current="page" href="/git/github.html">GitHub</a>
                        </li>
                        <li>
                            <hr class="divider">
                        </li>
                        
                    </ul>

                </li>
                

                

                
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
                        aria-expanded="false">Языки программирования и не только</a>

                    <ul class="dropdown-menu dropdown-menu-end dropdown-menu-lg-start">
                        

                        <li class="nav-item">
                            <a class="dropdown-item" aria-current="page" href="/lang/javascript.html">JavaScript</a>
                        </li>
                        <li>
                            <hr class="divider">
                        </li>
                        

                        <li class="nav-item">
                            <a class="dropdown-item" aria-current="page" href="/lang/python.html">Python</a>
                        </li>
                        <li>
                            <hr class="divider">
                        </li>
                        

                        <li class="nav-item">
                            <a class="dropdown-item" aria-current="page" href="/lang/markdown.html">Markdown</a>
                        </li>
                        <li>
                            <hr class="divider">
                        </li>
                        
                    </ul>

                </li>
                

                

                
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
                        aria-expanded="false">CMS</a>

                    <ul class="dropdown-menu dropdown-menu-end dropdown-menu-lg-start">
                        

                        <li class="nav-item">
                            <a class="dropdown-item" aria-current="page" href="/cms/jekyll.html">Jekyll</a>
                        </li>
                        <li>
                            <hr class="divider">
                        </li>
                        

                        <li class="nav-item">
                            <a class="dropdown-item" aria-current="page" href="/cms/wordpress.html">WordPress</a>
                        </li>
                        <li>
                            <hr class="divider">
                        </li>
                        
                    </ul>

                </li>
                

                

                
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
                        aria-expanded="false">IDE, Тестовые редакторы</a>

                    <ul class="dropdown-menu dropdown-menu-end dropdown-menu-lg-start">
                        

                        <li class="nav-item">
                            <a class="dropdown-item" aria-current="page" href="/ide-text-editors/vscode.html">Visual Studio Code</a>
                        </li>
                        <li>
                            <hr class="divider">
                        </li>
                        

                        <li class="nav-item">
                            <a class="dropdown-item" aria-current="page" href="/ide-text-editors/phpstorm.html">PhpStorm</a>
                        </li>
                        <li>
                            <hr class="divider">
                        </li>
                        
                    </ul>

                </li>
                

                

                
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
                        aria-expanded="false">Software</a>

                    <ul class="dropdown-menu dropdown-menu-end dropdown-menu-lg-start">
                        

                        <li class="nav-item">
                            <a class="dropdown-item" aria-current="page" href="/software/zabbix.html">Zabbix</a>
                        </li>
                        <li>
                            <hr class="divider">
                        </li>
                        

                        <li class="nav-item">
                            <a class="dropdown-item" aria-current="page" href="/software/nginx.html">Nginx</a>
                        </li>
                        <li>
                            <hr class="divider">
                        </li>
                        

                        <li class="nav-item">
                            <a class="dropdown-item" aria-current="page" href="/software/apache.html">Apache</a>
                        </li>
                        <li>
                            <hr class="divider">
                        </li>
                        
                    </ul>

                </li>
                

                

                

                <li class="nav-item">
                    <a class="nav-link" aria-current="page" href="/about.html">Об авторе</a>
                </li>

                

                
            </ul>
        </div>
    </div>
</nav>

        </header>

        <main>
            <h1 id="коллекции">Коллекции</h1>
<p>Рассмотрим конкретизацию авторов, чтобы у каждого автора была собственная страница с аннотацией и постами, которые они опубликовали.</p>

<p>Для этого используем коллекции. Коллекции аналогичны постам, за исключением того, что контент не нужно группировать по дате.</p>

<h2 id="конфигурация">Конфигурация</h2>
<p>Создание коллекций происходит в файле конфигурации Jekyll. Давай его создадим в корневой директории <strong>_config.yml</strong> и добавим в него:</p>

<figure class="highlight">
  <pre><code class="language-yaml" data-lang="yaml"><span class="na">collections</span><span class="pi">:</span>
    <span class="na">authors</span><span class="pi">:</span></code></pre>
</figure>

<p>Для загрузки конфигурации из файла нужно перезагрузить сервер Jekyll. Нажмем <strong>CTRL + C</strong> в терминале для остановки сервера и запустим его заново командой <strong>jekyll serve</strong>.</p>

<h2 id="добавление-авторов">Добавление авторов</h2>
<p>Документы(элементы коллекции) будут находится в папке в корне сайта с именем <strong>_название_коллекции</strong>, в данном случае <strong>_authors</strong>.</p>

<p>Создадим файлы для авторов:
<strong>_authors/alisia.md</strong></p>

<figure class="highlight">
  <pre><code class="language-markdown" data-lang="markdown"><span class="nn">---</span>
<span class="na">short_name</span><span class="pi">:</span> <span class="s">alisia</span>
<span class="na">name</span><span class="pi">:</span> <span class="s">Alisia Ford</span>
<span class="na">position</span><span class="pi">:</span> <span class="s">Главный редактор</span>
<span class="nn">---</span>
Алисия работает шеф-поваром в итальянском ресторане.</code></pre>
</figure>

<p><strong>_authors/jack.md</strong></p>

<figure class="highlight">
  <pre><code class="language-markdown" data-lang="markdown"><span class="nn">---</span>
<span class="na">short_name</span><span class="pi">:</span> <span class="s">jack</span>
<span class="na">name</span><span class="pi">:</span> <span class="s">Jack Doe</span>
<span class="na">position</span><span class="pi">:</span> <span class="s">Писатель</span>
<span class="nn">---</span>
Джек работает помощником шеф-повара и специализируется на пасте.</code></pre>
</figure>

<p><strong>_authors/terry.md</strong></p>

<figure class="highlight">
  <pre><code class="language-markdown" data-lang="markdown"><span class="nn">---</span>
<span class="na">short_name</span><span class="pi">:</span> <span class="s">terry</span>
<span class="na">name</span><span class="pi">:</span> <span class="s">Terry Smith</span>
<span class="na">position</span><span class="pi">:</span> <span class="s">Писатель</span>
<span class="nn">---</span>
Терри работает пиццайоло.</code></pre>
</figure>

<h2 id="страница-авторов">Страница авторов</h2>
<p>Теперь добавим страницу со списком всех автором. Jekyll делает данную коллекцию доступной на сайте через переменную <strong>site.authors</strong>.</p>

<p>Создаем файл <strong>authors.html</strong> в корне и перебираем <strong>site.authors</strong> для вывода всех авторов:</p>

<figure class="highlight">
  <pre><code class="language-html" data-lang="html">---
layout: default
title: Авторы
---
<span class="nt">&lt;h1&gt;</span>Авторы<span class="nt">&lt;/h1&gt;</span>

<span class="nt">&lt;ul&gt;</span>
    {% for author in site.authors %}
        <span class="nt">&lt;li&gt;</span>
            <span class="nt">&lt;h2&gt;</span>{{ author.name }}<span class="nt">&lt;/h2&gt;</span>
            <span class="nt">&lt;h3&gt;</span>{{ author.position }}<span class="nt">&lt;/h3&gt;</span>
            <span class="nt">&lt;p&gt;</span>{{ author.content | markdownify }}<span class="nt">&lt;/p&gt;</span>
        <span class="nt">&lt;/li&gt;</span>
        {% endfor %}
<span class="nt">&lt;/ul&gt;</span></code></pre>
</figure>

<p>Так как основной контент в Markdown, то для вывода нужно использовать фильтр <strong>markdownify</strong>. Это происходит автоматически, когда вывод использует <strong>{{ content }}</strong>  в макете.</p>

<p>Также не забываем добавить новую страницу в навигацию:</p>

<figure class="highlight">
  <pre><code class="language-yaml" data-lang="yaml"><span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Home</span>
    <span class="s">link</span><span class="err">:</span> <span class="s">/</span>
<span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">About</span>
    <span class="s">link</span><span class="err">:</span> <span class="s">/about.html</span>
<span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Blog</span>
    <span class="s">link</span><span class="err">:</span> <span class="s">/blog.html</span>
<span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">Authors</span>
    <span class="s">link</span><span class="err">:</span> <span class="s">/authors.html</span></code></pre>
</figure>

<h2 id="вывод-страницы">Вывод страницы</h2>
<p>По умолчанию коллекции не выводят страницы для документов. В данном случаем, сделаем чтобы у каждого автора была своя страница, а для этого настроим конфигурацию коллекции:</p>

<p>Откроем файл <strong>config.yml</strong> и добавим в коллекцию автора строчку <strong>output: true</strong>:</p>

<figure class="highlight">
  <pre><code class="language-yaml" data-lang="yaml"><span class="na">collections</span><span class="pi">:</span>
    <span class="na">authors</span><span class="pi">:</span>
        <span class="na">output</span><span class="pi">:</span> <span class="no">true</span></code></pre>
</figure>

<p>После изменения конфигурации не забываем перезагрузить сервер Jekyll.</p>

<p>Ссылка на страницу будет доступна через переменную <strong>author.url</strong>.</p>

<p>Добавим ее в файл <strong>authors.html</strong>:</p>

<figure class="highlight">
  <pre><code class="language-html" data-lang="html">---
layout: default
title: Авторы
---
<span class="nt">&lt;h1&gt;</span>Авторы<span class="nt">&lt;/h1&gt;</span>

<span class="nt">&lt;ul&gt;</span>
    {% for author in site.authors %}
        <span class="nt">&lt;li&gt;</span>
            <span class="nt">&lt;h2&gt;&lt;a</span> <span class="na">href=</span><span class="s">"{{ author.url }}"</span><span class="nt">&gt;</span>{{ author.name }}<span class="nt">&lt;/a&gt;&lt;/h2&gt;</span>
            <span class="nt">&lt;h3&gt;</span>{{ author.position }}<span class="nt">&lt;/h3&gt;</span>
            <span class="nt">&lt;p&gt;</span>{{ author.content | markdownify }}<span class="nt">&lt;/p&gt;</span>
        <span class="nt">&lt;/li&gt;</span>
        {% endfor %}
<span class="nt">&lt;/ul&gt;</span></code></pre>
</figure>

<p>Как и в случае с постами нужно создать макет для авторов. Создадим файл _layout/author.html и добавим туда:</p>

<figure class="highlight">
  <pre><code class="language-html" data-lang="html">---
layout: default
---
<span class="nt">&lt;h1&gt;</span>{{ page.name }}<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;h2&gt;</span>{{ page.position }}<span class="nt">&lt;/h2&gt;</span>

{{ content }}</code></pre>
</figure>

<h2 id="front-matter-по-умолчанию">Front matter по умолчанию</h2>
<p>Теперь нужно сконфигурировать файл авторов для использования макета <strong>author</strong>. Это можно сделать во front matter, как сделано в других файлах, но это приводит к повтору кода.</p>

<p>Что действительно хотелось бы получить, так это то, чтобы все посты автоматически имели макет поста, авторы имели макет автора, а все остальное использовало макет по умолчанию.</p>

<p>Этого можно добиться использую значения по умолчанию front matter в файле <strong>_config.yml</strong>. В нем устанавливаем то, к чему используется значение по умолчанию или которое захотим.</p>

<p>Добавим значения по умолчанию для макетов в файл <strong>_config.yml</strong>:</p>

<figure class="highlight">
  <pre><code class="language-yaml" data-lang="yaml"><span class="na">collections</span><span class="pi">:</span>
    <span class="na">authors</span><span class="pi">:</span>
        <span class="na">output</span><span class="pi">:</span> <span class="no">true</span>

<span class="na">defaults</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">scope</span><span class="pi">:</span>
            <span class="na">path</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span>
            <span class="na">type</span><span class="pi">:</span> <span class="s2">"</span><span class="s">authors"</span>
      <span class="err">  </span><span class="na">values</span><span class="pi">:</span>
            <span class="na">layout</span><span class="pi">:</span> <span class="s2">"</span><span class="s">author"</span>
    <span class="pi">-</span> <span class="na">scope</span><span class="pi">:</span>
            <span class="na">path</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span>
            <span class="na">type</span><span class="pi">:</span> <span class="s2">"</span><span class="s">posts"</span>
      <span class="err">  </span><span class="na">values</span><span class="pi">:</span>
            <span class="na">layout</span><span class="pi">:</span> <span class="s2">"</span><span class="s">post"</span>
    <span class="pi">-</span> <span class="na">scope</span><span class="pi">:</span>
            <span class="na">path</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span>
      <span class="err">  </span><span class="na">values</span><span class="pi">:</span>
            <span class="na">layout</span><span class="pi">:</span> <span class="s2">"</span><span class="s">default"</span></code></pre>
</figure>

<p>Теперь можно удалить определение макета из front matter всех страниц и постов.</p>

<h2 id="список-постов-автора">Список постов автора</h2>
<p>Для вывода постов автора, потребуется сопоставить <strong>short_name</strong> автора и <strong>author</strong> из поста.</p>

<p>А далее переберем отфильтрованный список в <strong>_layouts/author.html</strong> для вывода постов автора:</p>

<figure class="highlight">
  <pre><code class="language-html" data-lang="html">---
layout: default
---
<span class="nt">&lt;h1&gt;</span>{{ page.name }}<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;h2&gt;</span>{{ page.position }}<span class="nt">&lt;/h2&gt;</span>

{{ content }}

<span class="nt">&lt;h2&gt;</span>Posts<span class="nt">&lt;/h2&gt;</span>
<span class="nt">&lt;ul&gt;</span>
    {% assign filtered_posts = site.posts | where: 'author', page.short_name %}
    {% for post in filtered_posts %}
        <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"{{ post.url }}"</span><span class="nt">&gt;</span>{{ post.title }}<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
    {% endfor %}
<span class="nt">&lt;/ul&gt;</span></code></pre>
</figure>

<h2 id="ссылка-на-автора-поста">Ссылка на автора поста</h2>
<p>В посте есть ссылка на автора, поэтому свяжем ее со страницей автора. Сделать это можно используя аналогичный способ фильтрации в файле _layouts/post.html:</p>

<figure class="highlight">
  <pre><code class="language-html" data-lang="html"><span class="nt">&lt;h1&gt;</span>{{ page.title }}<span class="nt">&lt;/h1&gt;</span>

<span class="nt">&lt;p&gt;</span>
    {{ page.date | date_to_string }}
    {% assign author = site.authors | where: 'short_name', page.author | first %}
    {% if author %}
        - <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"{{ author.url }}"</span><span class="nt">&gt;</span>{{ author.name }}<span class="nt">&lt;/a&gt;</span>
    {% endif %}
<span class="nt">&lt;/p&gt;</span>

{{ content }}</code></pre>
</figure>

<p>Откройте <a href="http://localhost:4000">http://localhost:4000</a> и посмотрите на страницу с авторами и ссылки автора на посты, чтобы убедиться, что все правильно связано.</p>











<div class="prev-next-button">
    
    <span class="button prev">
        <a href="/jekyll/stepbystep/9-blog">
            <img src="/assets/img/arrow.png">
        </a>
    </span>
    
    
    <span class="button next">
        <a href="/jekyll/stepbystep/11-deployment">
            <img src="/assets/img/arrow.png">
        </a>
    </span>
    
</div>






<div class="step">
    <a href="/jekyll/stepbystep/1-install">Установка</a>
</div>

<div class="step">
    <a href="/jekyll/stepbystep/2-create">Создание сайта</a>
</div>

<div class="step">
    <a href="/jekyll/stepbystep/3-liquid">Liquid</a>
</div>

<div class="step">
    <a href="/jekyll/stepbystep/4-front-matter">Front-Matter</a>
</div>

<div class="step">
    <a href="/jekyll/stepbystep/5-layouts">Макеты</a>
</div>

<div class="step">
    <a href="/jekyll/stepbystep/6-includes">Includes(Включения)</a>
</div>

<div class="step">
    <a href="/jekyll/stepbystep/7-data">Файлы данных</a>
</div>

<div class="step">
    <a href="/jekyll/stepbystep/8-assets">Ресурсы</a>
</div>

<div class="step">
    <a href="/jekyll/stepbystep/9-blog">Ведение блога</a>
</div>

<div class="step">
    <a href="/jekyll/stepbystep/10-collections">Коллекции</a>
</div>

<div class="step">
    <a href="/jekyll/stepbystep/11-deployment">Развертывание</a>
</div>

            <div class="container">
    <ul class="list-group posts">
        
        
    </ul>
</div>
        </main>

        <footer>
    <div class="container">
        <div class="tags">
            




<a href="/tag/linux" target="_blank">
    <nobr>linux</nobr>
</a>



<a href="/tag/centos-7" target="_blank">
    <nobr>centos-7</nobr>
</a>



<a href="/tag/jekyll" target="_blank">
    <nobr>jekyll</nobr>
</a>



<a href="/tag/github-pages" target="_blank">
    <nobr>github-pages</nobr>
</a>



<a href="/tag/github" target="_blank">
    <nobr>github</nobr>
</a>



<a href="/tag/blog" target="_blank">
    <nobr>blog</nobr>
</a>



<a href="/tag/windows" target="_blank">
    <nobr>windows</nobr>
</a>



<a href="/tag/vscode" target="_blank">
    <nobr>vscode</nobr>
</a>



<a href="/tag/text-editors" target="_blank">
    <nobr>text-editors</nobr>
</a>



<a href="/tag/macos" target="_blank">
    <nobr>macos</nobr>
</a>

        </div>
        <div class="links">
            <div>
                <h4>Социальные сети</h4>
                <ul class="list-group socials">
                    
                    <li class="list-group-item">
                        <a href="https://github.com/InFallen" target="_blank">
                            <img src="/assets/img/icon-github.png" alt="icon GitHub">
                        </a>
                    </li>
                    
                    <li class="list-group-item">
                        <a href="https://vk.com/infallen" target="_blank">
                            <img src="/assets/img/icon-vk.png" alt="icon VK">
                        </a>
                    </li>
                    
                </ul>
            </div>
            <div>
                <h4>Используемые ресурсы</h4>
                <ul class="list-group resources">
                    
                    <li class="list-group-item">
                        <a href="https://getbootstrap.com/" target="_blank">
                            <img src="/assets/img/icon-bootstrap.png" alt="icon Bootstrap">
                        </a> - инструменты для создания сайтов и веб-приложений.
                    </li>
                    
                    <li class="list-group-item">
                        <a href="https://icons8.ru/" target="_blank">
                            <img src="/assets/img/icon-icons8.png" alt="icon Icons8">
                        </a> - иконки на любой случай.
                    </li>
                    
                </ul>
            </div>
        </div>
        <div class="copyright">
            
            <span>Copyright &copy; infallen.space 2022.
                Все
                права защищены</span>
        </div>
    </div>
</footer>
    </div>
    <!-- JavaScript Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-u1OknCvxWvY5kfmNBILK2hRnQC3Pr17a+RTT6rIHI7NnikvbZlHgTPOOmMi466C8"
        crossorigin="anonymous"></script>
    <script scr="/assets/js/scripts.js"></script>

</body>

</html>